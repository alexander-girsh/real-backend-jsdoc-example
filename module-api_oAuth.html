<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>api/oAuth - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-api_accounts.html">api/accounts</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_accounts.html#createLocal">createLocal</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#authenticateLocal">authenticateLocal</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#initEmailConfirmation">initEmailConfirmation</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#confirmEmailWithCode">confirmEmailWithCode</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#sendPasswordRecoveryCode">sendPasswordRecoveryCode</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#checkPasswordRecoveryCode">checkPasswordRecoveryCode</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#issueNewPassword">issueNewPassword</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#logout">logout</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#getAccountData">getAccountData</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#list">list</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#getDetailedInfo">getDetailedInfo</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#addNote">addNote</a></li></ul></li><li><a href="module-api_accounts_social-network-integrations_telegram.html">api/accounts/social-network-integrations/telegram</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_telegram.html#initTelegramAccountIntegration">initTelegramAccountIntegration</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_telegram.html#getCommunity">getCommunity</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_telegram.html#checkCommunityMembership">checkCommunityMembership</a></li></ul></li><li><a href="module-api_accounts_social-network-integrations_vk.html">api/accounts/social-network-integrations/vk</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_vk.html#getCommunity">getCommunity</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_vk.html#checkCommunityMembership">checkCommunityMembership</a></li></ul></li><li><a href="module-api_affiliates.html">api/affiliates</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_affiliates.html#getAffiliatesList">getAffiliatesList</a></li><li data-type='method' style='display: none;'><a href="module-api_affiliates.html#getDetailedAffiliateInfo">getDetailedAffiliateInfo</a></li></ul></li><li><a href="module-api_bonuses_branded-steam-name-mechanics.html">api/bonuses/branded-steam-name-mechanics</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_bonuses_branded-steam-name-mechanics.html#getStages">getStages</a></li><li data-type='method' style='display: none;'><a href="module-api_bonuses_branded-steam-name-mechanics.html#getCurrentStage">getCurrentStage</a></li><li data-type='method' style='display: none;'><a href="module-api_bonuses_branded-steam-name-mechanics.html#forceReCheck">forceReCheck</a></li></ul></li><li><a href="module-api_bonuses.html">api/bonuses</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_bonuses.html#getBonusesList">getBonusesList</a></li></ul></li><li><a href="module-api_chats.html">api/chats</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_chats.html#getChatById">getChatById</a></li><li data-type='method' style='display: none;'><a href="module-api_chats.html#removeChatMessage">removeChatMessage</a></li><li data-type='method' style='display: none;'><a href="module-api_chats.html#muteUserInChat">muteUserInChat</a></li></ul></li><li><a href="module-api_games_crash_final-multipliers.html">api/games/crash/final-multipliers</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_games_crash_final-multipliers.html#getFinalMultiplierGroupsList">getFinalMultiplierGroupsList</a></li><li data-type='method' style='display: none;'><a href="module-api_games_crash_final-multipliers.html#generateFinalMultipliersGroup">generateFinalMultipliersGroup</a></li><li data-type='method' style='display: none;'><a href="module-api_games_crash_final-multipliers.html#activateFinalMultipliersGroup">activateFinalMultipliersGroup</a></li><li data-type='method' style='display: none;'><a href="module-api_games_crash_final-multipliers.html#doTestRunForFinalMultipliersGroup">doTestRunForFinalMultipliersGroup</a></li></ul></li><li><a href="module-api_games_crash.html">api/games/crash</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_games_crash.html#current">current</a></li><li data-type='method' style='display: none;'><a href="module-api_games_crash.html#join">join</a></li></ul></li><li><a href="module-api_games.html">api/games</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_games.html#playingHistory">playingHistory</a></li><li data-type='method' style='display: none;'><a href="module-api_games.html#playingStats">playingStats</a></li><li data-type='method' style='display: none;'><a href="module-api_games.html#getGamesList">getGamesList</a></li></ul></li><li><a href="module-api_inventory.html">api/inventory</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_inventory.html#itemsList">itemsList</a></li><li data-type='method' style='display: none;'><a href="module-api_inventory.html#getWithdrawalsList">getWithdrawalsList</a></li><li data-type='method' style='display: none;'><a href="module-api_inventory.html#approveWithdrawalRequest">approveWithdrawalRequest</a></li><li data-type='method' style='display: none;'><a href="module-api_inventory.html#rejectWithdrawalRequest">rejectWithdrawalRequest</a></li><li data-type='method' style='display: none;'><a href="module-api_inventory.html#getAttentionRequiringWithdrawalsCount">getAttentionRequiringWithdrawalsCount</a></li></ul></li><li><a href="module-api_oAuth.html">api/oAuth</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateVKRedirect">generateVKRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#handleVKRedirect">handleVKRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateGoogleRedirect">generateGoogleRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#handleGoogleRedirect">handleGoogleRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateYandexRedirect">generateYandexRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#handleYandexRedirect">handleYandexRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateSteamRedirect">generateSteamRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#~handleSteamRedirect">handleSteamRedirect</a></li></ul></li><li><a href="module-api_payments.html">api/payments</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_payments.html#depositRules">depositRules</a></li><li data-type='method' style='display: none;'><a href="module-api_payments.html#generateDepositRedirect">generateDepositRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_payments.html#getDepositsList">getDepositsList</a></li></ul></li><li><a href="module-api_promocodes.html">api/promocodes</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_promocodes.html#activate">activate</a></li><li data-type='method' style='display: none;'><a href="module-api_promocodes.html#getPromocodeActivationsList">getPromocodeActivationsList</a></li></ul></li><li><a href="module-api_promocodes_management.html">api/promocodes/management</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_promocodes_management.html#promocodesList">promocodesList</a></li><li data-type='method' style='display: none;'><a href="module-api_promocodes_management.html#getPromocodeActivations">getPromocodeActivations</a></li><li data-type='method' style='display: none;'><a href="module-api_promocodes_management.html#createPromocode">createPromocode</a></li><li data-type='method' style='display: none;'><a href="module-api_promocodes_management.html#updatePromocode">updatePromocode</a></li><li data-type='method' style='display: none;'><a href="module-api_promocodes_management.html#removePromocode">removePromocode</a></li></ul></li><li><a href="module-api_support.html">api/support</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_support.html#getSupportChatsList">getSupportChatsList</a></li></ul></li><li><a href="module-middleware_access.html">middleware/access</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-middleware_access.html#accessUser">accessUser</a></li><li data-type='method' style='display: none;'><a href="module-middleware_access.html#accessAdmin">accessAdmin</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="module-api_accounts.html#.event:personal:account/balanceUpdate">personal:account/balanceUpdate</a></li><li><a href="module-api_accounts.html#.event:personal:account/accountDataUpdate">personal:account/accountDataUpdate</a></li><li><a href="module-api_accounts.html#.event:scoped:admin/accounts/newNote">scoped:admin/accounts/newNote</a></li><li><a href="module-api_bonuses.html#.event:personal:bonuses/bonusAccrued">personal:bonuses/bonusAccrued</a></li><li><a href="module-api_games_crash.html#.event:public:crash-game/statusUpdate">public:crash-game/statusUpdate</a></li><li><a href="module-api_promocodes.html#.event:personal:promocodes/activationUpdate">personal:promocodes/activationUpdate</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AccountPermissions">AccountPermissions</a></li><li><a href="global.html#AdminPermissionsScope">AdminPermissionsScope</a></li><li><a href="global.html#AccountData">AccountData</a></li><li><a href="global.html#ExtendedAccountData">ExtendedAccountData</a></li><li><a href="global.html#AdminNote">AdminNote</a></li><li><a href="global.html#AffiliateOverview">AffiliateOverview</a></li><li><a href="global.html#AffiliatePersonalData">AffiliatePersonalData</a></li><li><a href="global.html#AffiliateReferral">AffiliateReferral</a></li><li><a href="global.html#ChatType">ChatType</a></li><li><a href="global.html#ChatMessageStatus">ChatMessageStatus</a></li><li><a href="global.html#Chat">Chat</a></li><li><a href="global.html#ChatMessage">ChatMessage</a></li><li><a href="global.html#ChatMuting">ChatMuting</a></li><li><a href="global.html#CrashGameFinalMultiplier">CrashGameFinalMultiplier</a></li><li><a href="global.html#CrashGameFinalMultipliersGroupStatus">CrashGameFinalMultipliersGroupStatus</a></li><li><a href="global.html#CrashGameFinalMultipliersGroup">CrashGameFinalMultipliersGroup</a></li><li><a href="global.html#CrashGamePublicState">CrashGamePublicState</a></li><li><a href="global.html#AccountStateRequirements">AccountStateRequirements</a></li><li><a href="global.html#GameType">GameType</a></li><li><a href="global.html#GameStatus">GameStatus</a></li><li><a href="global.html#Game">Game</a></li><li><a href="global.html#GameWin">GameWin</a></li><li><a href="global.html#GameBet">GameBet</a></li><li><a href="global.html#Player">Player</a></li><li><a href="global.html#PlayingStats">PlayingStats</a></li><li><a href="global.html#PlayingHistoryEntry">PlayingHistoryEntry</a></li><li><a href="global.html#AggregatedGameData">AggregatedGameData</a></li><li><a href="global.html#SteamAppName">SteamAppName</a></li><li><a href="global.html#InventoryItemStatus">InventoryItemStatus</a></li><li><a href="global.html#InventoryItem">InventoryItem</a></li><li><a href="global.html#InventoryItemWithdrawalAttemptPurchaseStatuses">InventoryItemWithdrawalAttemptPurchaseStatuses</a></li><li><a href="global.html#InventoryItemWithdrawalAttemptPurchaseMarketNames">InventoryItemWithdrawalAttemptPurchaseMarketNames</a></li><li><a href="global.html#InventoryItemWithdrawalAttemptStatus">InventoryItemWithdrawalAttemptStatus</a></li><li><a href="global.html#InventoryItemWithdrawalAttempt">InventoryItemWithdrawalAttempt</a></li><li><a href="global.html#WithdrawalsListEntry">WithdrawalsListEntry</a></li><li><a href="global.html#KNOWN_ACQUIRING_SYSTEMS">KNOWN_ACQUIRING_SYSTEMS</a></li><li><a href="global.html#PAYMENT_METHOD_KINDS">PAYMENT_METHOD_KINDS</a></li><li><a href="global.html#PAYMENT_METHOD_ICON_NAMES">PAYMENT_METHOD_ICON_NAMES</a></li><li><a href="global.html#PaymentMethod">PaymentMethod</a></li><li><a href="global.html#DepositStatuses">DepositStatuses</a></li><li><a href="global.html#Deposit">Deposit</a></li><li><a href="global.html#PeriodicalStatsEntry">PeriodicalStatsEntry</a></li><li><a href="global.html">getPeriodicalStats</a></li><li><a href="global.html#SupportChatsListEntry">SupportChatsListEntry</a></li><li><a href="global.html#BonusSource">BonusSource</a></li><li><a href="global.html#BonusAccrualForm">BonusAccrualForm</a></li><li><a href="global.html#BonusKind">BonusKind</a></li><li><a href="global.html#BonusTrigger">BonusTrigger</a></li><li><a href="global.html#Bonus">Bonus</a></li><li><a href="global.html#ExtendedBonusInfo">ExtendedBonusInfo</a></li><li><a href="global.html#BrandedSteamNicknameBonusStage">BrandedSteamNicknameBonusStage</a></li><li><a href="global.html#PromocodeCategory">PromocodeCategory</a></li><li><a href="global.html#Promocode">Promocode</a></li><li><a href="global.html#PromocodeActivationStatus">PromocodeActivationStatus</a></li><li><a href="global.html#PromocodeActivation">PromocodeActivation</a></li><li><a href="global.html#ExtendedPromocodeActivationInfo">ExtendedPromocodeActivationInfo</a></li><li><a href="global.html#Status">Status</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">api/oAuth</h1>
    

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    
        <div class="container-overview">
        
            
                <div class="description usertext"><h2>Contains handlers for redirects from the oauth-apps</h2>
<p>Routes starting with &quot;generate***&quot; redirect user
to oauth app url.</p>
<p>Routes starting with &quot;handle***&quot; work with back-redirects
from the oauth apps</p>
<h2>Redirects to get access to user account in the oauth-provider network</h2>
<p>The first kind are endpoints named &quot;generate-<oAuth-provider-name>-redirect&quot;
It redirects the user's browser to rights granting dialogue of our application
hosted by the one of used oAuth providers using variables like
.<oAuth-provider-name>_APP_ID provided from server configuration (env).</p>
<h2>User authentication or the new account creating</h2>
<p>The second kind endpoints named &quot;handle-<oAuth-provider-name>-redirect&quot;
handles the redirects back from the oAuth-provider, if user gave the access
rights to our application.</p>
<p>The query of this redirects will also contain the &quot;code&quot; param according
oAuth2 standard. The handlers will use this one-off code to exchange it to
an access-token. We don't store the given access-token and use it just once
in next step to get the unique account id of user on the oauth-provider-platform.
On account creation we save this unique id to the specific field like &quot;google_id&quot;
with uniqueness constraints.</p>
<p>Because this id is unique, it allows us to authenticate user on our platform,
or create a new account if it doesnt exist. In case of creating the new one we also
request the user account data from the oauth-provider to fill the fields &quot;username&quot; and &quot;avatar&quot;</p>
<h2>Binding oAuth accounts to existed platform account</h2>
<p>If user satisfies the following conditions</p>
<ul>
<li>has an account on our platform</li>
<li>is logged in</li>
<li>has an account in network of one of ours oAuth-providers
and this account still isn't binded to some account on our platform,</li>
</ul>
<p>User can bind this account in oauth-provider network with his existed
account on our platform with which he is logged in. To start this procedure,
user's browser should pass &quot;bind=true&quot; boolean param to the appropriate
&quot;generate-<oauth-provider-name>-redirect&quot; endpoint.</p>
<p>According the oAuth2 specification, we use the &quot;state&quot; param to transmit the &quot;bind&quot; directive
from &quot;generate-<em><strong>-redirect&quot; to &quot;handle-</strong></em>-redirect&quot; methods.
If any &quot;handle-***-redirect&quot; method receives the redirect with &quot;state=bind&quot; param,
it should start the binding procedure.
It receives the unique account id from the oauth-provider and checks that this id
is not used from some other account on our platform to identification.
If this check is not passed, user will be redirected to &quot;config.DEFAULT_OAUTH_SUCCESS_REDIRECT_URL&quot; with
query &quot;?oauth_binding=<oauth-provider-user-friendly-name>&amp;result=exists&quot;
else an unique id from provider will be saved and user
will be redirected to &quot;config.DEFAULT_OAUTH_SUCCESS_REDIRECT_URL&quot; with query &quot;?oauth_binding=true&amp;result=done&quot;</p></div>
            

            
                




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://tools.ietf.org/html/rfc6749">https://tools.ietf.org/html/rfc6749</a></li>
        </ul>
    </dd>
    

    
</dl>
































            
        
        </div>
    

    

    

    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="generateVKRedirect"><span class="type-signature">(route) </span>generateVKRedirect<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>module:config.VK_APP_ID</li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/oauth/generate-vk-redirect</td>
                            </tr>
                            </table>
                            <p>It generates link and redirects user's browser to oauth provider substituting oauth application credentials from config</p>
                            <h5>Header Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">host</td>
            <td class="type">String</td>
            
            
            <td class="description last">a domain to generate the redirect_uri</td>
          </tr>
          </table>
                            <h5>Query Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Attributes</th>
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">bind</td>
            <td class="type">Boolean</td>
            <td class="attributes">optional</td>
            
            <td class="description last">if wanna bind an oauth id to existed account</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">302</td>
            
            
            <td class="description last">Redirect to oAuth provider</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="handleVKRedirect"><span class="type-signature">(route) </span>handleVKRedirect<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="module-api_oAuth.html#generateVKRedirect">module:api/oAuth~generateVKRedirect</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/oauth/handle-vk-redirect</td>
                            </tr>
                            </table>
                            <p>It handles the redirect from oAuth provider,
exchanges provided &quot;code&quot; to the access token and authenticates user
using received access token</p>
                            <h5>Query Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">code</td>
            <td class="type">String</td>
            
            
            <td class="description last">code to exchange it to the access token</td>
          </tr><tr>
            <td class="name">state</td>
            <td class="type">String</td>
            
            
            <td class="description last">"bind" if we should bind account on oauth provider to the existed platform account</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">302</td>
            
            
            <td class="description last">Redirect to /user (profile && settings page)</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="generateGoogleRedirect"><span class="type-signature">(route) </span>generateGoogleRedirect<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>module:config.GOOGLE_APP_ID</li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/oauth/generate-google-redirect</td>
                            </tr>
                            </table>
                            <p>It generates link and redirects user's browser to oauth provider substituting oauth application credentials from config</p>
                            <h5>Header Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">host</td>
            <td class="type">String</td>
            
            
            <td class="description last">a domain to generate the redirect_uri</td>
          </tr>
          </table>
                            <h5>Query Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Attributes</th>
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">bind</td>
            <td class="type">Boolean</td>
            <td class="attributes">optional</td>
            
            <td class="description last">if wanna bind an oauth id to existed account</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">302</td>
            
            
            <td class="description last">Redirect to oAuth provider</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="handleGoogleRedirect"><span class="type-signature">(route) </span>handleGoogleRedirect<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="module-api_oAuth.html#generateGoogleRedirect">module:api/oAuth~generateGoogleRedirect</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/oauth/handle-google-redirect</td>
                            </tr>
                            </table>
                            <p>It handles the redirect from oAuth provider,
exchanges provided &quot;code&quot; to the access token and authenticates user
using received access token</p>
                            <h5>Query Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">code</td>
            <td class="type">String</td>
            
            
            <td class="description last">code to exchange it to the access token</td>
          </tr><tr>
            <td class="name">state</td>
            <td class="type">String</td>
            
            
            <td class="description last">"bind" if we should bind account on oauth provider to the existed platform account</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">302</td>
            
            
            <td class="description last">Redirect to /user (profile && settings page)</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="generateYandexRedirect"><span class="type-signature">(route) </span>generateYandexRedirect<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>module:config.YANDEX_APP_ID</li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/oauth/generate-yandex-redirect</td>
                            </tr>
                            </table>
                            <p>It generates link and redirects user's browser to oauth provider substituting oauth application credentials from config</p>
                            <h5>Header Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">host</td>
            <td class="type">String</td>
            
            
            <td class="description last">a domain to generate the redirect_uri</td>
          </tr>
          </table>
                            <h5>Query Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Attributes</th>
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">bind</td>
            <td class="type">Boolean</td>
            <td class="attributes">optional</td>
            
            <td class="description last">if wanna bind an oauth id to existed account</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">302</td>
            
            
            <td class="description last">Redirect to oAuth provider</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="handleYandexRedirect"><span class="type-signature">(route) </span>handleYandexRedirect<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="module-api_oAuth.html#generateYandexRedirect">module:api/oAuth~generateYandexRedirect</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/oauth/handle-yandex-redirect</td>
                            </tr>
                            </table>
                            <p>It handles the redirect from oAuth provider,
exchanges provided &quot;code&quot; to the access token and authenticates user
using received access token</p>
                            <h5>Query Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">code</td>
            <td class="type">String</td>
            
            
            <td class="description last">code to exchange it to the access token</td>
          </tr><tr>
            <td class="name">state</td>
            <td class="type">String</td>
            
            
            <td class="description last">"bind" if we should bind account on oauth provider to the existed platform account</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">302</td>
            
            
            <td class="description last">Redirect to /user (profile && settings page)</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="generateSteamRedirect"><span class="type-signature">(route) </span>generateSteamRedirect<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>module:config.STEAM_APP_ID</li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/oauth/generate-steam-redirect</td>
                            </tr>
                            </table>
                            <p>It generates link and redirects user's browser to oauth provider substituting oauth application credentials from config</p>
                            <h5>Header Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">host</td>
            <td class="type">String</td>
            
            
            <td class="description last">a domain to generate the redirect_uri</td>
          </tr>
          </table>
                            <h5>Query Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Attributes</th>
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">bind</td>
            <td class="type">Boolean</td>
            <td class="attributes">optional</td>
            
            <td class="description last">if wanna bind an oauth id to existed account</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">302</td>
            
            
            <td class="description last">Redirect to oAuth provider</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="~handleSteamRedirect"><span class="type-signature">(async, inner) </span>handleSteamRedirect<span class="signature">(req, res, next)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>This is the part of our implementation of OpenId protocol via Steam
When steam redirects user to us we should validate the req params which contains the user data (steam id) and signature.
After the validation we fetch the user data from steam and use it as it was received using the oauth protocol</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">Express.request</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">Express.response</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type">Express.next</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>



















        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Tue Apr 27 2021 13:08:14 GMT+0300 (Moscow Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>