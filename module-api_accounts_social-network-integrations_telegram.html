<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>api/accounts/social-network-integrations/telegram - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-api_accounts.html">api/accounts</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_accounts.html#createLocal">createLocal</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#authenticateLocal">authenticateLocal</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#initEmailConfirmation">initEmailConfirmation</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#confirmEmailWithCode">confirmEmailWithCode</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#sendPasswordRecoveryCode">sendPasswordRecoveryCode</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#checkPasswordRecoveryCode">checkPasswordRecoveryCode</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#issueNewPassword">issueNewPassword</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#logout">logout</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#getAccountData">getAccountData</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts.html#list">list</a></li></ul></li><li><a href="module-api_accounts_social-network-integrations_telegram.html">api/accounts/social-network-integrations/telegram</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_telegram.html#initTelegramAccountIntegration">initTelegramAccountIntegration</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_telegram.html#getCommunity">getCommunity</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_telegram.html#checkCommunityMembership">checkCommunityMembership</a></li></ul></li><li><a href="module-api_accounts_social-network-integrations_vk.html">api/accounts/social-network-integrations/vk</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_vk.html#getCommunity">getCommunity</a></li><li data-type='method' style='display: none;'><a href="module-api_accounts_social-network-integrations_vk.html#checkCommunityMembership">checkCommunityMembership</a></li></ul></li><li><a href="module-api_games_crash.html">api/games/crash</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_games_crash.html#current">current</a></li><li data-type='method' style='display: none;'><a href="module-api_games_crash.html#join">join</a></li></ul></li><li><a href="module-api_games.html">api/games</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_games.html#playingHistory">playingHistory</a></li><li data-type='method' style='display: none;'><a href="module-api_games.html#playingStats">playingStats</a></li></ul></li><li><a href="module-api_inventory.html">api/inventory</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_inventory.html#itemsList">itemsList</a></li></ul></li><li><a href="module-api_oAuth.html">api/oAuth</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateVKRedirect">generateVKRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#handleVKRedirect">handleVKRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateGoogleRedirect">generateGoogleRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#handleGoogleRedirect">handleGoogleRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateYandexRedirect">generateYandexRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#handleYandexRedirect">handleYandexRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#generateSteamRedirect">generateSteamRedirect</a></li><li data-type='method' style='display: none;'><a href="module-api_oAuth.html#~handleSteamRedirect">handleSteamRedirect</a></li></ul></li><li><a href="module-api_payments.html">api/payments</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api_payments.html#depositRules">depositRules</a></li><li data-type='method' style='display: none;'><a href="module-api_payments.html#generateDepositRedirect">generateDepositRedirect</a></li></ul></li><li><a href="module-middleware_access.html">middleware/access</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-middleware_access.html#~setAuthCookie">setAuthCookie</a></li><li data-type='method' style='display: none;'><a href="module-middleware_access.html#~removeAuthCookie">removeAuthCookie</a></li><li data-type='method' style='display: none;'><a href="module-middleware_access.html#addAuthorizationDataToRequest">addAuthorizationDataToRequest</a></li><li data-type='method' style='display: none;'><a href="module-middleware_access.html#accessUser">accessUser</a></li><li data-type='method' style='display: none;'><a href="module-middleware_access.html#accessAdmin">accessAdmin</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="module-api_accounts.html#.event:personal:account/balanceUpdate">personal:account/balanceUpdate</a></li><li><a href="module-api_accounts.html#.event:personal:account/accountDataUpdate">personal:account/accountDataUpdate</a></li><li><a href="module-api_games_crash.html#.event:public:crash-game/statusUpdate">public:crash-game/statusUpdate</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AccountPermissions">AccountPermissions</a></li><li><a href="global.html#AdminPermissionsScope">AdminPermissionsScope</a></li><li><a href="global.html#AccountData">AccountData</a></li><li><a href="global.html#CrashGamePublicState">CrashGamePublicState</a></li><li><a href="global.html#AccountStateRequirements">AccountStateRequirements</a></li><li><a href="global.html#GameType">GameType</a></li><li><a href="global.html#GameStatus">GameStatus</a></li><li><a href="global.html#Game">Game</a></li><li><a href="global.html#GameWin">GameWin</a></li><li><a href="global.html#GameBet">GameBet</a></li><li><a href="global.html#Player">Player</a></li><li><a href="global.html#PlayingStats">PlayingStats</a></li><li><a href="global.html#PlayingHistoryEntry">PlayingHistoryEntry</a></li><li><a href="global.html#SteamAppName">SteamAppName</a></li><li><a href="global.html#InventoryItemStatus">InventoryItemStatus</a></li><li><a href="global.html#InventoryItem">InventoryItem</a></li><li><a href="global.html#KNOWN_ACQUIRING_SYSTEMS">KNOWN_ACQUIRING_SYSTEMS</a></li><li><a href="global.html#PAYMENT_METHOD_KINDS">PAYMENT_METHOD_KINDS</a></li><li><a href="global.html#PAYMENT_METHOD_ICON_NAMES">PAYMENT_METHOD_ICON_NAMES</a></li><li><a href="global.html#PaymentMethod">PaymentMethod</a></li><li><a href="global.html#Status">Status</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">api/accounts/social-network-integrations/telegram</h1>
    

    




<section>

<header>
    
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

            
        
        </div>
    

    

    

    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="initTelegramAccountIntegration"><span class="type-signature">(route) </span>initTelegramAccountIntegration<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <h5>Handlers Chain:</h5>
                            <table class="params">
                            <thead><tr class="last"><th>Order</th></tr></thead>
                            <tr><td class="type"><a href="module-middleware_access.html#addAuthorizationDataToRequest">module:middleware/access~addAuthorizationDataToRequest</a></td></tr><tr><td class="type"><a href="module-middleware_access.html#accessUser">module:middleware/access~accessUser</a></td></tr><tr><td class="type">this endpoint</td></tr>
                            </table>
                            <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">POST</td>
                            <td class="name last">/api/accounts/social-network-integrations/telegram/init-integration</td>
                            </tr>
                            </table>
                            <p>It generates new telegram binding code, saves it and returns.
While the code is valid it can be used to bind user's telegram account to his account on our service</p>
                            <h5>Response:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">status</td>
            <td class="type">codes.OK</td>
            
            
            <td class="description last">if success</td>
          </tr><tr>
            <td class="name">link_to_bot</td>
            <td class="type">String</td>
            
            
            <td class="description last">if success, an actual lint to telegram bot you should open for user</td>
          </tr><tr>
            <td class="name">code</td>
            <td class="type">Number</td>
            
            
            <td class="description last">the secret code to send to bot</td>
          </tr><tr>
            <td class="name">valid_before</td>
            <td class="type">String</td>
            
            
            <td class="description last">the ISO-date after which you should reissue new code using the same endpoint</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.FORBIDDEN</td>
            
            
            <td class="description last">if authorization error</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.FAIL</td>
            
            
            <td class="description last">if internal error</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.INCORRECT_STATE</td>
            
            
            <td class="description last">if .telegram_id already exists in AccountData {@see AccountData}</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.TEMPORARY_UNAVAILABLE</td>
            
            
            <td class="description last">if telegram bot is not up</td>
          </tr><tr>
            <td class="name">desc</td>
            <td class="type">String</td>
            
            
            <td class="description last">optional text description if .status != codes.OK</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">403</td>
            
            
            <td class="description last">if user is not authorized and access denied</td>
          </tr><tr>
            
            <td class="type">200</td>
            
            
            <td class="description last">in all other cases</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="getCommunity"><span class="type-signature">(route) </span>getCommunity<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <h5>Handlers Chain:</h5>
                            <table class="params">
                            <thead><tr class="last"><th>Order</th></tr></thead>
                            <tr><td class="type"><a href="module-middleware_access.html#addAuthorizationDataToRequest">module:middleware/access~addAuthorizationDataToRequest</a></td></tr><tr><td class="type"><a href="module-middleware_access.html#accessUser">module:middleware/access~accessUser</a></td></tr><tr><td class="type">this endpoint</td></tr>
                            </table>
                            <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/api/accounts/social-network-integrations/telegram/community</td>
                            </tr>
                            </table>
                            <p>It returns a data about our main telegram community</p>
                            <h5>Response:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">status</td>
            <td class="type">codes.OK</td>
            
            
            <td class="description last">if success</td>
          </tr><tr>
            <td class="name">telegram_community_link</td>
            <td class="type">String</td>
            
            
            <td class="description last">if success, the absolute link u should give to user</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.FORBIDDEN</td>
            
            
            <td class="description last">if authorization error</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.FAIL</td>
            
            
            <td class="description last">if internal error</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">403</td>
            
            
            <td class="description last">if user is not authorized and access denied</td>
          </tr><tr>
            
            <td class="type">200</td>
            
            
            <td class="description last">in all other cases</td>
          </tr>
          </table>
</div>




























        
            

    

    <h4 class="name" id="checkCommunityMembership"><span class="type-signature">(route) </span>checkCommunityMembership<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <h5>Handlers Chain:</h5>
                            <table class="params">
                            <thead><tr class="last"><th>Order</th></tr></thead>
                            <tr><td class="type"><a href="module-middleware_access.html#addAuthorizationDataToRequest">module:middleware/access~addAuthorizationDataToRequest</a></td></tr><tr><td class="type"><a href="module-middleware_access.html#accessUser">module:middleware/access~accessUser</a></td></tr><tr><td class="type">this endpoint</td></tr>
                            </table>
                            <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">POST</td>
                            <td class="name last">/api/accounts/social-network-integrations/telegram/check-community-membership</td>
                            </tr>
                            </table>
                            <p>It returns and renews (as a side-effect) the state
of AccountData.social_network_integrations.telegram_community.is_member (see <a href="global.html#AccountData">AccountData</a>)
If AccountData.social_network_integrations.telegram_community.is_member will be updated after checking,
event &quot;personal:account/accountDataUpdate&quot; will be fired</p>
                            <h5>Response:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">status</td>
            <td class="type">codes.OK</td>
            
            
            <td class="description last">if success</td>
          </tr><tr>
            <td class="name">checking_result</td>
            <td class="type">Object</td>
            
            
            <td class="description last">if success</td>
          </tr><tr>
            <td class="name">checking_result.is_member</td>
            <td class="type">Boolean</td>
            
            
            <td class="description last">if success, the flag which describes is user a member of tg community or not</td>
          </tr><tr>
            <td class="name">undefined</td>
            <td class="type">codes.INCORRECT_STATE</td>
            
            
            <td class="description last">if user has no AccountData.telegram_id</td>
          </tr><tr>
            <td class="name">undefined</td>
            <td class="type">codes.TEMPORARY_UNAVAILABLE</td>
            
            
            <td class="description last">if our tg bot is not UP</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.FORBIDDEN</td>
            
            
            <td class="description last">if authorization error</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.NOT_FOUND</td>
            
            
            <td class="description last">if telegram_chat_id, stored in server-side config, is incorrect.
Most likely this is the internal error.</td>
          </tr><tr>
            <td class="name">status</td>
            <td class="type">codes.FAIL</td>
            
            
            <td class="description last">if internal error</td>
          </tr><tr>
            <td class="name">desc</td>
            <td class="type">String</td>
            
            
            <td class="description last">occasionally =)</td>
          </tr>
          </table>
                            <h5>Response Code:</h5>
          <table class="params">
            <thead>
              <tr>
                
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            
            <td class="type">403</td>
            
            
            <td class="description last">if user is not authorized and access denied</td>
          </tr><tr>
            
            <td class="type">200</td>
            
            
            <td class="description last">in all other cases</td>
          </tr>
          </table>
</div>




























        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Tue Feb 16 2021 03:15:50 GMT+0300 (Moscow Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>